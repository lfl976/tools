<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width initial-scale=1" />
        <title>动词变形</title>
    </head>
    <body>
        <figure class="table-figure">
            <table border cellspacing="0" cellpadding="10">
                <thead>
                    <tr>
                        <th>类型</th>
                        <th>基本形</th>
                        <th>ます形</th>
                        <th>ない形</th>
                        <th>て形</th>
                        <th>た形</th>
                        <th>ば形</th>
                        <th>命令形</th>
                        <th>意志形</th>
                        <th>可能形</th>
                        <th>被动形</th>
                        <th>使役形</th>
                        <th>使役被动</th>
                        <th>禁止形</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td rowspan="10">一类动词</td>
                        <td>書く</td>
                        <td>書きます</td>
                        <td>書かない</td>
                        <td>書いて</td>
                        <td>書いた</td>
                        <td>書けば</td>
                        <td>書け</td>
                        <td>書こう</td>
                        <td>書ける</td>
                        <td>書かれる</td>
                        <td>書かせる</td>
                        <td>書かせられる</td>
                        <td>書くな</td>
                    </tr>
                    <tr>
                        <td>行く</td>
                        <td>行きます</td>
                        <td>行かない</td>
                        <td><strong>行って</strong></td>
                        <td><strong>行った</strong></td>
                        <td>行けば</td>
                        <td>行け</td>
                        <td>行こう</td>
                        <td>行ける</td>
                        <td>行かれる</td>
                        <td>行かせる</td>
                        <td>行かせられる</td>
                        <td>行くな</td>
                    </tr>
                    <tr>
                        <td>急ぐ</td>
                        <td>急ぎます</td>
                        <td>急がない</td>
                        <td>急いで</td>
                        <td>急いだ</td>
                        <td>急げば</td>
                        <td>急げ</td>
                        <td>急ごう</td>
                        <td>急げる</td>
                        <td>急がれる</td>
                        <td>急がせる</td>
                        <td>急がせられる</td>
                        <td>急ぐな</td>
                    </tr>
                    <tr>
                        <td>飛ぶ</td>
                        <td>飛びます</td>
                        <td>飛ばない</td>
                        <td>飛んで</td>
                        <td>飛んだ</td>
                        <td>飛べば</td>
                        <td>飛べ</td>
                        <td>飛ぼう</td>
                        <td>飛べる</td>
                        <td>飛ばれる</td>
                        <td>飛ばせる</td>
                        <td>飛ばせられる</td>
                        <td>飛ぶな</td>
                    </tr>
                    <tr>
                        <td>読む</td>
                        <td>読みます</td>
                        <td>読まない</td>
                        <td>読んで</td>
                        <td>読んだ</td>
                        <td>読めば</td>
                        <td>読め</td>
                        <td>読もう</td>
                        <td>読める</td>
                        <td>読まれる</td>
                        <td>読ませる</td>
                        <td>読ませられる</td>
                        <td>読むな</td>
                    </tr>
                    <tr>
                        <td>死ぬ</td>
                        <td>死にます</td>
                        <td>死なない</td>
                        <td>死んで</td>
                        <td>死んだ</td>
                        <td>死ねば</td>
                        <td>死ね</td>
                        <td>死のう</td>
                        <td>死ねる</td>
                        <td>死なれる</td>
                        <td>死なせる</td>
                        <td>死なせられる</td>
                        <td>死ぬな</td>
                    </tr>
                    <tr>
                        <td>待つ</td>
                        <td>待ちます</td>
                        <td>待たない</td>
                        <td>待って</td>
                        <td>待った</td>
                        <td>待てば</td>
                        <td>待て</td>
                        <td>待とう</td>
                        <td>待てる</td>
                        <td>待たれる</td>
                        <td>待たせる</td>
                        <td>待たせられる</td>
                        <td>まつな</td>
                    </tr>
                    <tr>
                        <td>売る</td>
                        <td>売ります</td>
                        <td>売らない</td>
                        <td>売って</td>
                        <td>売った</td>
                        <td>売れば</td>
                        <td>売れ</td>
                        <td>売ろう</td>
                        <td>売れる</td>
                        <td>売られる</td>
                        <td>売らせる</td>
                        <td>売らせられる</td>
                        <td>売るな</td>
                    </tr>
                    <tr>
                        <td>買う</td>
                        <td>買います</td>
                        <td>買わない</td>
                        <td>買って</td>
                        <td>買った</td>
                        <td>買えば</td>
                        <td>買え</td>
                        <td>買おう</td>
                        <td>買える</td>
                        <td>買われる</td>
                        <td>買わせる</td>
                        <td>買わせられる</td>
                        <td>買うな</td>
                    </tr>
                    <tr>
                        <td>話す</td>
                        <td>話します</td>
                        <td>話さない</td>
                        <td>話して</td>
                        <td>話した</td>
                        <td>話せば</td>
                        <td>話せ</td>
                        <td>話そう</td>
                        <td>話せる</td>
                        <td>話される</td>
                        <td>話させる</td>
                        <td>話させられる</td>
                        <td>話すな</td>
                    </tr>
                    <tr>
                        <td rowspan="2">二类动词</td>
                        <td>食べる</td>
                        <td>食べます</td>
                        <td>食べない</td>
                        <td>食べて</td>
                        <td>食べた</td>
                        <td>食べれば</td>
                        <td>食べろ</td>
                        <td>食べよう</td>
                        <td>食べられる</td>
                        <td>食べられる</td>
                        <td>食べさせる</td>
                        <td>食べさせられる</td>
                        <td>食べるな</td>
                    </tr>
                    <tr>
                        <td>見る</td>
                        <td>見ます</td>
                        <td>見ない</td>
                        <td>見て</td>
                        <td>見た</td>
                        <td>見れば</td>
                        <td>見ろ</td>
                        <td>見よう</td>
                        <td>見られる</td>
                        <td>見られる</td>
                        <td>見させる</td>
                        <td>見させられる</td>
                        <td>見るな</td>
                    </tr>
                    <tr>
                        <td rowspan="2">三类动词</td>
                        <td>来る</td>
                        <td>来ます</td>
                        <td>来ない</td>
                        <td>来て</td>
                        <td>来た</td>
                        <td>来れば</td>
                        <td>来い</td>
                        <td>来よう</td>
                        <td>来られる</td>
                        <td>来られる</td>
                        <td>来させる</td>
                        <td>来させられる</td>
                        <td>来るな</td>
                    </tr>
                    <tr>
                        <td>する</td>
                        <td>します</td>
                        <td>しない</td>
                        <td>して</td>
                        <td>した</td>
                        <td>すれば</td>
                        <td>しろ</td>
                        <td>しよう</td>
                        <td>できる</td>
                        <td>される</td>
                        <td>させる</td>
                        <td>させられる</td>
                        <td>するな</td>
                    </tr>
                </tbody>
            </table>
        </figure>
        <script>
            // 等待语音加载完成
            function loadVoices() {
                return new Promise((resolve) => {
                    let voices = speechSynthesis.getVoices();
                    if (voices.length !== 0) {
                        resolve(voices);
                        return;
                    }
                    speechSynthesis.onvoiceschanged = () => {
                        resolve(speechSynthesis.getVoices());
                    };
                });
            }

            async function setupTableVoiceReader() {
                const voices = await loadVoices();

                // 自动选择一个日语语音（如果有多种，取第一个）
                const jaVoice = voices.find(
                    (v) => v.lang === "ja-JP" && v.name.includes("Google"),
                );

                const tbody = document.querySelector("table tbody");
                if (!tbody) return;

                tbody.addEventListener("click", (e) => {
                    if (e.target.tagName.toLowerCase() !== "td") return;

                    const text = e.target.textContent.trim();
                    if (!text) return;

                    const utter = new SpeechSynthesisUtterance(text);
                    utter.lang = "ja-JP";

                    if (jaVoice) utter.voice = jaVoice; // 确保使用日语语音

                    speechSynthesis.cancel(); // 先停止当前语音（避免叠加）
                    speechSynthesis.speak(utter);
                });
            }

            // 启动
            setupTableVoiceReader();
        </script>
    </body>
</html>
